---
import SlideLayout from '../layouts/SlideLayout.astro';
import SlideNavigation from '../components/SlideNavigation.astro';
import Timeline from '../components/Timeline.astro';
import ArchitectureDiagram from '../components/ArchitectureDiagram.astro';

const timelineItems = [
  {
    phase: "F1",
    title: "An√°lisis y Requisitos",
    duration: "3 semanas",
    description: "Levantamiento de requerimientos con el gerente general y el equipo de la fundaci√≥n."
  },
  {
    phase: "F2",
    title: "Dise√±o del Sistema",
    duration: "2 semanas",
    description: "Dise√±o de la arquitectura, base de datos e interfaces de usuario."
  },
  {
    phase: "F3",
    title: "Desarrollo",
    duration: "6 semanas",
    description: "Programaci√≥n del sistema de agenda, donativos e inventario."
  },
  {
    phase: "F4",
    title: "Pruebas",
    duration: "2 semanas",
    description: "Pruebas de funcionalidad, seguridad y usabilidad con usuarios reales."
  },
  {
    phase: "F5",
    title: "Despliegue",
    duration: "1 semana",
    description: "Implementaci√≥n en la nube y capacitaci√≥n al personal de la fundaci√≥n."
  }
];
---

<SlideLayout>
  <main class="presentation">
    <!-- Slide 1: Portada -->
    <section class="slide active" data-slide="0">
      <div class="slide-content portada">
        <div class="logo-container animate-scale-in">
          <div class="logo">
            <span class="logo-icon">ü§ù</span>
          </div>
        </div>
        <div class="portada-text">
          <span class="badge animate-fade-in-up delay-1">
            <span class="badge-dot"></span>
            Ingenier√≠a de Software
          </span>
          <h1 class="animate-fade-in-up delay-2">Fundaci√≥n<br><span class="text-accent">Ayuda Mutua</span></h1>
          <p class="subtitle animate-fade-in-up delay-3">Sistema de Gesti√≥n Integral para la Modernizaci√≥n Administrativa</p>
          <div class="portada-meta animate-fade-in-up delay-4">
            <span>Diciembre 2025</span>
            <span class="separator">‚Ä¢</span>
            <span>Presentaci√≥n Ejecutiva</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 2: Prop√≥sito del Proyecto -->
    <section class="slide" data-slide="1">
      <div class="slide-content">
        <span class="slide-number">01</span>
        <h2 class="animate-fade-in-up">Prop√≥sito del <span class="text-accent">Proyecto</span></h2>
        <p class="lead animate-fade-in-up delay-1">Modernizar la administraci√≥n de la fundaci√≥n mediante la automatizaci√≥n de procesos cr√≠ticos.</p>
        
        <div class="purpose-grid animate-fade-in-up delay-2">
          <div class="purpose-card">
            <div class="purpose-icon">üìÖ</div>
            <h4>Automatizaci√≥n de Agenda</h4>
            <p>Eliminar el uso de agendas de papel y digitalizar la gesti√≥n de eventos.</p>
          </div>
          <div class="purpose-card">
            <div class="purpose-icon">üí∞</div>
            <h4>Control de Donativos</h4>
            <p>Asegurar que cada peso se asigne correctamente a los programas sociales.</p>
          </div>
          <div class="purpose-card">
            <div class="purpose-icon">üìä</div>
            <h4>Recuperar Asistencia</h4>
            <p>Mejorar el seguimiento de invitaciones y confirmaciones a eventos.</p>
          </div>
          <div class="purpose-card">
            <div class="purpose-icon">üöÄ</div>
            <h4>Superar el Rezago</h4>
            <p>Adoptar tecnolog√≠a moderna para una gesti√≥n eficiente.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 3: P√∫blico Objetivo -->
    <section class="slide" data-slide="2">
      <div class="slide-content">
        <span class="slide-number">02</span>
        <h2 class="animate-fade-in-up">¬øA qui√©nes va <span class="text-accent">dirigido</span>?</h2>
        
        <div class="audience-container animate-fade-in-up delay-1">
          <div class="audience-card primary">
            <div class="audience-avatar">üëî</div>
            <div class="audience-info">
              <h3>Gerente General</h3>
              <p>Acceso a reportes ejecutivos, control de fondos y visibilidad completa de las operaciones de la fundaci√≥n.</p>
              <div class="audience-features">
                <span>Dashboard</span>
                <span>Reportes</span>
                <span>Decisiones</span>
              </div>
            </div>
          </div>
          
          <div class="audience-card">
            <div class="audience-avatar">üíº</div>
            <div class="audience-info">
              <h3>Personal Administrativo</h3>
              <p>Gesti√≥n diaria de eventos, registro de donantes y control de beneficiarios.</p>
              <div class="audience-features">
                <span>Agenda</span>
                <span>Registros</span>
                <span>Seguimiento</span>
              </div>
            </div>
          </div>
          
          <div class="audience-card">
            <div class="audience-avatar">‚ù§Ô∏è</div>
            <div class="audience-info">
              <h3>Donantes</h3>
              <p>Transparencia en el destino de sus aportaciones y comunicaci√≥n sobre eventos.</p>
              <div class="audience-features">
                <span>Transparencia</span>
                <span>Invitaciones</span>
                <span>Historial</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 4: Detalles y Ventajas -->
    <section class="slide" data-slide="3">
      <div class="slide-content">
        <span class="slide-number">03</span>
        <h2 class="animate-fade-in-up">Detalles y <span class="text-accent">Ventajas</span></h2>
        
        <div class="advantages-layout animate-fade-in-up delay-1">
          <div class="advantage-list">
            <div class="advantage-item">
              <div class="advantage-check">‚úì</div>
              <div>
                <h4>Eliminaci√≥n de papel</h4>
                <p>Sustituci√≥n de agendas f√≠sicas por sistema digital centralizado.</p>
              </div>
            </div>
            <div class="advantage-item">
              <div class="advantage-check">‚úì</div>
              <div>
                <h4>Trazabilidad completa</h4>
                <p>Seguimiento del destino de cada donativo a los programas sociales.</p>
              </div>
            </div>
            <div class="advantage-item">
              <div class="advantage-check">‚úì</div>
              <div>
                <h4>Acceso remoto</h4>
                <p>Sistema en la nube accesible desde cualquier dispositivo.</p>
              </div>
            </div>
            <div class="advantage-item">
              <div class="advantage-check">‚úì</div>
              <div>
                <h4>Seguridad de datos</h4>
                <p>Control de acceso mediante usuarios para proteger informaci√≥n sensible.</p>
              </div>
            </div>
          </div>
          
          <div class="programs-box">
            <h4>Programas Beneficiados</h4>
            <div class="programs-grid">
              <div class="program">
                <span class="program-icon">üè†</span>
                <span>Albergue</span>
              </div>
              <div class="program">
                <span class="program-icon">üçΩÔ∏è</span>
                <span>Alimentos</span>
              </div>
              <div class="program">
                <span class="program-icon">üé®</span>
                <span>Talleres</span>
              </div>
              <div class="program">
                <span class="program-icon">üìö</span>
                <span>Lectura</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 5: Soluci√≥n T√©cnica -->
    <section class="slide" data-slide="4">
      <div class="slide-content solution-slide">
        <span class="slide-number">04</span>
        <h2 class="animate-fade-in-up">Soluci√≥n <span class="text-accent">T√©cnica</span></h2>
        <p class="lead animate-fade-in-up delay-1">Arquitectura de capas para un sistema organizado y f√°cil de mantener.</p>
        
        <div class="solution-layout">
          <div class="architecture-section animate-fade-in-left delay-2">
            <ArchitectureDiagram />
          </div>
          
          <div class="data-design animate-fade-in-right delay-3">
            <h3>Dise√±o de Datos</h3>
            <div class="data-entities">
              <div class="entity">
                <span class="entity-icon">üë•</span>
                <div>
                  <strong>Donantes</strong>
                  <small>Nombres, contactos, historial</small>
                </div>
              </div>
              <div class="entity">
                <span class="entity-icon">üìÖ</span>
                <div>
                  <strong>Eventos</strong>
                  <small>Lugar, fecha, expositores</small>
                </div>
              </div>
              <div class="entity">
                <span class="entity-icon">üì¶</span>
                <div>
                  <strong>Inventario</strong>
                  <small>Art√≠culos donados</small>
                </div>
              </div>
              <div class="entity">
                <span class="entity-icon">üôã</span>
                <div>
                  <strong>Beneficiarios</strong>
                  <small>Albergue, talleres</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 6: Calendario -->
    <section class="slide" data-slide="5">
      <div class="slide-content">
        <span class="slide-number">05</span>
        <h2 class="animate-fade-in-up">Calendario del <span class="text-accent">Proyecto</span></h2>
        <p class="lead animate-fade-in-up delay-1">Duraci√≥n estimada: 14 semanas</p>
        
        <div class="timeline-container">
          <Timeline items={timelineItems} />
        </div>
      </div>
    </section>

    <!-- Slide 7: Contacto -->
    <section class="slide" data-slide="6">
      <div class="slide-content contact-slide">
        <div class="contact-card animate-scale-in">
          <div class="contact-logo">
            <span>ü§ù</span>
          </div>
          <span class="badge animate-fade-in-up delay-1">Informaci√≥n de Contacto</span>
          <h2 class="animate-fade-in-up delay-2">Rigoberto de Jes√∫s<br><span class="text-accent">Calder√≥n Flores</span></h2>
          
          <div class="contact-details animate-fade-in-up delay-3">
            <div class="contact-item">
              <span class="contact-label">Matr√≠cula</span>
              <span class="contact-value">25008707</span>
            </div>
            <div class="contact-item">
              <span class="contact-label">Curso</span>
              <span class="contact-value">Ingenier√≠a de Software</span>
            </div>
            <div class="contact-item">
              <span class="contact-label">Docente</span>
              <span class="contact-value">Ang√©lica Alejandra Serrano Rubio</span>
            </div>
          </div>
          
          <div class="thank-you animate-fade-in-up delay-4">
            <p>¬°Gracias por su atenci√≥n!</p>
          </div>
        </div>
        
        <div class="uveg-badge animate-fade-in-up delay-5">
          <span>UVEG</span>
          <span class="separator">‚Ä¢</span>
          <span>Diciembre 2025</span>
        </div>
      </div>
    </section>
  </main>
  
  <SlideNavigation totalSlides={7} />

  <script>
    // Slide Navigation Logic
    document.addEventListener('DOMContentLoaded', () => {
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.progress-dot');
      const prevBtn = document.querySelector('.nav-button.prev');
      const nextBtn = document.querySelector('.nav-button.next');
      const currentSlideSpan = document.querySelector('.current-slide');
      const totalSlides = slides.length;
      let currentSlide = 0;

      function goToSlide(index: number) {
        if (index < 0 || index >= totalSlides) return;
        
        // Remove active class from current slide
        slides[currentSlide].classList.remove('active');
        dots[currentSlide].classList.remove('active');
        
        // Update current slide
        currentSlide = index;
        
        // Add active class to new slide
        slides[currentSlide].classList.add('active');
        dots[currentSlide].classList.add('active');
        
        // Update counter
        if (currentSlideSpan) {
          currentSlideSpan.textContent = String(currentSlide + 1);
        }
        
        // Update button states
        if (prevBtn) {
          (prevBtn as HTMLButtonElement).disabled = currentSlide === 0;
        }
        if (nextBtn) {
          (nextBtn as HTMLButtonElement).disabled = currentSlide === totalSlides - 1;
        }
        
        // Re-trigger animations
        const slideContent = slides[currentSlide].querySelector('.slide-content');
        if (slideContent) {
          slideContent.querySelectorAll('[class*="animate-"]').forEach((el) => {
            const element = el as HTMLElement;
            element.style.animation = 'none';
            element.offsetHeight; // Trigger reflow
            element.style.animation = '';
          });
        }
      }

      function nextSlide() {
        if (currentSlide < totalSlides - 1) {
          goToSlide(currentSlide + 1);
        }
      }

      function prevSlide() {
        if (currentSlide > 0) {
          goToSlide(currentSlide - 1);
        }
      }

      // Button listeners
      prevBtn?.addEventListener('click', prevSlide);
      nextBtn?.addEventListener('click', nextSlide);

      // Dot navigation
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => goToSlide(index));
      });

      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') {
          e.preventDefault();
          nextSlide();
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          prevSlide();
        } else if (e.key === 'Home') {
          e.preventDefault();
          goToSlide(0);
        } else if (e.key === 'End') {
          e.preventDefault();
          goToSlide(totalSlides - 1);
        }
      });

      // Touch/Swipe support
      let touchStartX = 0;
      let touchEndX = 0;

      document.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      });

      document.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        const diff = touchStartX - touchEndX;
        if (Math.abs(diff) > 50) {
          if (diff > 0) {
            nextSlide();
          } else {
            prevSlide();
          }
        }
      });

      // Initialize
      goToSlide(0);
    });
  </script>
</SlideLayout>

<style>
  .presentation {
    width: 100vw;
    height: 100vh;
    position: relative;
    overflow: hidden;
  }
  
  .slide {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-slide), visibility var(--transition-slide);
  }
  
  .slide.active {
    opacity: 1;
    visibility: visible;
  }
  
  .slide-content {
    width: 100%;
    max-width: 1200px;
    padding: var(--space-8);
    position: relative;
  }
  
  .slide-number {
    position: absolute;
    top: 0;
    right: var(--space-8);
    font-size: var(--font-size-6xl);
    font-weight: 700;
    color: var(--color-accent-glow);
    opacity: 0.5;
    line-height: 1;
  }
  
  .lead {
    font-size: var(--font-size-xl);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-8);
    max-width: 600px;
  }
  
  /* Portada */
  .portada {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-6);
  }
  
  .logo-container {
    margin-bottom: var(--space-4);
  }
  
  .logo {
    width: 120px;
    height: 120px;
    background: var(--color-accent-glow);
    border: 2px solid var(--color-accent-primary);
    border-radius: var(--radius-2xl);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-glow);
  }
  
  .logo-icon {
    font-size: 4rem;
  }
  
  .portada-text {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
  }
  
  .badge-dot {
    width: 8px;
    height: 8px;
    background: var(--color-accent-primary);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }
  
  .subtitle {
    font-size: var(--font-size-xl);
    color: var(--color-text-secondary);
    max-width: 500px;
  }
  
  .portada-meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    color: var(--color-text-muted);
    font-size: var(--font-size-sm);
  }
  
  .separator {
    color: var(--color-accent-primary);
  }
  
  /* Purpose Grid */
  .purpose-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-5);
    margin-top: var(--space-6);
  }
  
  .purpose-card {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    transition: all var(--transition-base);
  }
  
  .purpose-card:hover {
    border-color: var(--color-accent-primary);
    transform: translateY(-4px);
    box-shadow: var(--shadow-glow);
  }
  
  .purpose-icon {
    font-size: 2rem;
    margin-bottom: var(--space-3);
  }
  
  .purpose-card h4 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--space-2);
  }
  
  .purpose-card p {
    font-size: var(--font-size-sm);
  }
  
  /* Audience */
  .audience-container {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    margin-top: var(--space-6);
  }
  
  .audience-card {
    display: flex;
    align-items: flex-start;
    gap: var(--space-5);
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    transition: all var(--transition-base);
  }
  
  .audience-card:hover {
    border-color: var(--color-accent-primary);
    transform: translateX(8px);
  }
  
  .audience-card.primary {
    border-color: var(--color-accent-secondary);
    background: rgba(212, 175, 55, 0.05);
  }
  
  .audience-avatar {
    width: 60px;
    height: 60px;
    background: var(--color-accent-glow);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
  }
  
  .audience-info h3 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--space-2);
  }
  
  .audience-info p {
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-3);
  }
  
  .audience-features {
    display: flex;
    gap: var(--space-2);
  }
  
  .audience-features span {
    padding: var(--space-1) var(--space-3);
    background: var(--color-bg-secondary);
    border-radius: 9999px;
    font-size: var(--font-size-xs);
    color: var(--color-accent-primary);
  }
  
  /* Advantages */
  .advantages-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
    margin-top: var(--space-6);
  }
  
  .advantage-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .advantage-item {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-4);
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition: all var(--transition-base);
  }
  
  .advantage-item:hover {
    border-color: var(--color-accent-primary);
  }
  
  .advantage-check {
    width: 32px;
    height: 32px;
    background: var(--color-accent-primary);
    color: var(--color-bg-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    flex-shrink: 0;
  }
  
  .advantage-item h4 {
    font-size: var(--font-size-base);
    margin-bottom: var(--space-1);
  }
  
  .advantage-item p {
    font-size: var(--font-size-sm);
  }
  
  .programs-box {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
  }
  
  .programs-box h4 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--space-5);
    color: var(--color-accent-secondary);
  }
  
  .programs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-4);
  }
  
  .program {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-md);
  }
  
  .program-icon {
    font-size: 1.5rem;
  }
  
  .program span:last-child {
    font-weight: 500;
    color: var(--color-text-primary);
  }
  
  /* Solution */
  .solution-slide .slide-content {
    max-width: 1400px;
  }
  
  .solution-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-10);
    align-items: start;
    margin-top: var(--space-6);
  }
  
  .data-design {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
  }
  
  .data-design h3 {
    font-size: var(--font-size-xl);
    margin-bottom: var(--space-5);
    color: var(--color-accent-secondary);
  }
  
  .data-entities {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .entity {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-md);
  }
  
  .entity-icon {
    font-size: 1.5rem;
  }
  
  .entity strong {
    display: block;
    color: var(--color-text-primary);
    margin-bottom: var(--space-1);
  }
  
  .entity small {
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
  }
  
  /* Timeline */
  .timeline-container {
    display: flex;
    justify-content: center;
    margin-top: var(--space-6);
  }
  
  /* Contact */
  .contact-slide {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    min-height: 80vh;
  }
  
  .contact-card {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2xl);
    padding: var(--space-10);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
    max-width: 500px;
  }
  
  .contact-logo {
    width: 80px;
    height: 80px;
    background: var(--color-accent-glow);
    border: 2px solid var(--color-accent-primary);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    margin-bottom: var(--space-2);
  }
  
  .contact-details {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    margin-top: var(--space-4);
  }
  
  .contact-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3) var(--space-4);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-md);
  }
  
  .contact-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
  }
  
  .contact-value {
    font-weight: 500;
    color: var(--color-text-primary);
  }
  
  .thank-you {
    margin-top: var(--space-6);
    padding-top: var(--space-6);
    border-top: 1px solid var(--color-border);
  }
  
  .thank-you p {
    font-size: var(--font-size-xl);
    font-weight: 500;
    color: var(--color-accent-primary);
  }
  
  .uveg-badge {
    position: absolute;
    bottom: var(--space-20);
    display: flex;
    align-items: center;
    gap: var(--space-3);
    color: var(--color-text-muted);
    font-size: var(--font-size-sm);
  }
  
  .uveg-badge span:first-child {
    font-weight: 700;
    color: var(--color-accent-secondary);
  }
  
  /* Responsive */
  @media (max-width: 1024px) {
    .solution-layout {
      grid-template-columns: 1fr;
      gap: var(--space-6);
    }
    
    .architecture-section {
      display: flex;
      justify-content: center;
    }
  }
  
  @media (max-width: 768px) {
    .slide-content {
      padding: var(--space-6);
    }
    
    .slide-number {
      font-size: var(--font-size-4xl);
      right: var(--space-6);
    }
    
    .purpose-grid,
    .advantages-layout {
      grid-template-columns: 1fr;
    }
    
    .audience-card {
      flex-direction: column;
      text-align: center;
    }
    
    .audience-features {
      justify-content: center;
    }
    
    .contact-card {
      padding: var(--space-6);
    }
    
    .contact-item {
      flex-direction: column;
      gap: var(--space-1);
      text-align: center;
    }
  }
</style>

